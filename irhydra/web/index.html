<!DOCTYPE html>

<html>
  <head>
    <link rel="import" href="packages/polymer/polymer.html">
    <link rel="import" href="packages/irhydra/src/ui/hydra.html">

    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">

    <link rel="stylesheet" href='http://fonts.googleapis.com/css?family=Oswald:400,700' type='text/css'>
    <link rel="stylesheet" href='http://fonts.googleapis.com/css?family=Lato:400,700,900' type='text/css'>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=RobotoDraft:regular,bold,italic,thin,light,bolditalic,black,medium" type="text/css">

    <link rel="stylesheet" href="packages/irhydra/src/ui/ir-pane.css">
    <link rel="stylesheet" href="packages/ui_utils/assets/xref.css">
    <link rel="stylesheet" href="css/hydra.css">

    <link rel="stylesheet" href="deps/fa/css/font-awesome.min.css">

    <script src="deps/spin.min.js"></script>

    <script src="deps/esprima.js"></script>
    <script src="deps/estraverse.js"></script>

    <script src="packages/ui_utils/assets/jquery/js/jquery-2.0.3.js"></script>
    <script src="packages/ui_utils/assets/jquery/js/jquery-ui-1.10.4.js"></script>

    <link rel="stylesheet" href="packages/ui_utils/assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="packages/ui_utils/assets/bootstrap/css/bootstrap-theme.min.css">
    <script src="packages/ui_utils/assets/bootstrap/js/bootstrap.js"></script>

  </head>

  <body>
    <div id="welcome-splash">
      <div class="welcome-message">
        <h1>IRHydra<sup>2</sup> <span id="splash-spinner"></span></h1>
        <p class="lead">This is a tool that can display intermediate
          representations used by V8 optimizing compiler.</p>
        <p>This project is running a slightly modified version of IRHydra,
          original project can be found on github:
          <a href="https://github.com/mraleph/irhydra">mraleph/irhydra</a>
        </p>
      </div>
    </div>
    <script>
      (function () {
        $("[data-toggle=tooltip]").tooltip();

        var spinner = new Spinner({  color: '#2980B9' }).spin(document.getElementById("splash-spinner"));

        document.addEventListener("HydraReady", function () {
          spinner.stop();
        }, false);
      })();

      function DESTROY_SPLASH() {
        var splash = document.querySelector("#welcome-splash");
        if (splash) {
          splash.parentNode.removeChild(splash);
        }
      }

      // This is a helper method for loading files without
      // line-endings normalization because FileReader.readAsBinaryString
      // is not exposed to Dart.
      function readAsBinaryString(file, cb) {
        console.log("Reading %s", file.name);
        var reader = new FileReader();

        reader.onloadend = function () {
          console.log("  ... %s loaded (%d characters)",
                      file.name,
                      reader.result.length);
          cb(reader.result);
        };

        // Fallback to readAsText if for some strange reason
        // readAsBinaryString is not available.
        var method = reader.readAsBinaryString || reader.readAsText;
        method.call(reader, file);
      }
    </script>
    <hydra-app></hydra-app>
    <script type="application/dart">export "package:polymer/init.dart";</script>
  </body>
</html>
